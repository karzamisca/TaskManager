<!-- views/itemPages/itemOrder/itemOrder.html -->
<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ƒê·∫∑t H√†ng</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="itemPages/itemOrder/itemOrder.css?v=1.2" />
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>ƒê·∫∑t H√†ng</h1>
        <p>Ch·ªçn s·∫£n ph·∫©m v√† s·ªë l∆∞·ª£ng cho ƒë∆°n h√†ng c·ªßa b·∫°n</p>
      </div>

      <div class="alert" id="alert"></div>

      <div class="main-content">
        <!-- M·ª•c S·∫£n Ph·∫©m C√≥ S·∫µn -->
        <div class="section">
          <h2>S·∫£n Ph·∫©m C√≥ S·∫µn</h2>
          <div class="items-list" id="items-list">
            <div class="loading">
              <div class="loading-spinner"></div>
              <p>ƒêang t·∫£i s·∫£n ph·∫©m...</p>
            </div>
          </div>
        </div>

        <!-- M·ª•c Gi·ªè H√†ng -->
        <div class="section">
          <h2>Gi·ªè H√†ng</h2>

          <!-- Order Number Edit Section -->
          <div class="order-number-section">
            <div class="order-number-edit">
              <label for="order-number-input">S·ªë ƒê∆°n H√†ng:</label>
              <div class="order-number-input-container">
                <input
                  type="text"
                  id="order-number-input"
                  class="order-number-input"
                  placeholder="ƒê·ªÉ tr·ªëng ƒë·ªÉ t·ª± ƒë·ªông t·∫°o s·ªë ƒë∆°n h√†ng..."
                />
              </div>
            </div>
            <div class="order-number-warning" id="order-number-warning">
              ‚ö†Ô∏è S·ªë ƒë∆°n h√†ng n√†y ƒë√£ t·ªìn t·∫°i. Vui l√≤ng ch·ªçn s·ªë kh√°c.
            </div>
            <div class="order-number-help">
              ƒê·ªÉ tr·ªëng ƒë·ªÉ h·ªá th·ªëng t·ª± ƒë·ªông t·∫°o s·ªë ƒë∆°n h√†ng duy nh·∫•t.
            </div>
          </div>

          <!-- Group Management Section -->
          <div class="group-management-section">
            <h3>üìÅ Qu·∫£n L√Ω Nh√≥m S·∫£n Ph·∫©m</h3>

            <div class="group-controls">
              <input
                type="text"
                id="new-group-name"
                class="group-input"
                placeholder="Nh·∫≠p t√™n nh√≥m m·ªõi..."
              />
              <button
                class="group-btn"
                onclick="createGroup()"
                id="create-group-btn"
              >
                <span>+ T·∫°o Nh√≥m</span>
              </button>
              <button
                class="group-btn clear-groups-btn"
                onclick="clearAllGroups()"
                id="clear-groups-btn"
                disabled
              >
                <span>üóëÔ∏è X√≥a T·∫•t C·∫£ Nh√≥m</span>
              </button>
            </div>

            <div class="group-list" id="group-list">
              <!-- Groups will be dynamically added here -->
            </div>
          </div>

          <!-- Cart Items Container -->
          <div class="cart-items" id="cart-items">
            <div class="empty-cart" id="empty-cart">
              <h3>Gi·ªè h√†ng c·ªßa b·∫°n ƒëang tr·ªëng</h3>
              <p>Th√™m s·∫£n ph·∫©m t·ª´ danh s√°ch ƒë·ªÉ b·∫Øt ƒë·∫ßu</p>
            </div>
          </div>

          <!-- Cart Summary -->
          <div class="cart-summary" id="cart-summary" style="display: none">
            <div class="summary-row">
              <span>T·ªïng ti·ªÅn (ch∆∞a VAT):</span>
              <span id="items-total">$0.00</span>
            </div>
            <div class="summary-row">
              <span>Thu·∫ø VAT:</span>
              <span id="vat-total">$0.00</span>
            </div>
            <div class="summary-row summary-total">
              <span>T·ªïng ti·ªÅn (sau VAT):</span>
              <span id="cart-summary-total">$0.00</span>
            </div>
          </div>

          <!-- Order Notes -->
          <div class="notes">
            <label for="order-notes">Ghi ch√∫ ƒë∆°n h√†ng:</label>
            <textarea
              id="order-notes"
              placeholder="Th√™m b·∫•t k·ª≥ h∆∞·ªõng d·∫´n ƒë·∫∑c bi·ªát ho·∫∑c ghi ch√∫ n√†o..."
            ></textarea>
          </div>

          <!-- Submit Button -->
          <button id="submit-order" class="submit-btn" disabled>
            üì¶ G·ª≠i ƒê∆°n H√†ng
          </button>
        </div>
      </div>

      <!-- M·ª•c ƒê∆°n H√†ng G·∫ßn ƒê√¢y -->
      <div class="section order-history">
        <h2>ƒê∆°n H√†ng G·∫ßn ƒê√¢y C·ªßa T√¥i</h2>
        <div id="recent-orders">
          <div class="loading">
            <div class="loading-spinner"></div>
            <p>ƒêang t·∫£i ƒë∆°n h√†ng g·∫ßn ƒë√¢y...</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal Chi Ti·∫øt ƒê∆°n H√†ng -->
    <div id="order-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="modal-title">Chi Ti·∫øt ƒê∆°n H√†ng</h2>
          <button class="close-btn" onclick="closeModal()">&times;</button>
        </div>
        <div class="modal-body" id="modal-body">
          <!-- Chi ti·∫øt ƒë∆°n h√†ng s·∫Ω ƒë∆∞·ª£c t·∫£i ·ªü ƒë√¢y -->
        </div>
      </div>
    </div>

    <!-- Modal Ch·ªânh S·ª≠a ƒê∆°n H√†ng -->
    <div id="edit-order-modal" class="modal edit-modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="edit-modal-title">Ch·ªânh S·ª≠a ƒê∆°n H√†ng</h2>
          <button class="close-btn" onclick="closeEditModal()">&times;</button>
        </div>
        <div class="modal-body" id="edit-modal-body">
          <!-- N·ªôi dung ch·ªânh s·ª≠a s·∫Ω ƒë∆∞·ª£c t·∫£i ·ªü ƒë√¢y -->
        </div>
      </div>
    </div>

    <script src="itemPages/itemOrder/itemOrder.js?v=1.3"></script>
    <script src="/components/header/headerLoader.js?v=1.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
