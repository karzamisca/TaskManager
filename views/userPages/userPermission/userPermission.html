<!-- views/userPages/userPermission/userPermission.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>User Permissions Management</title>
    <link rel="stylesheet" href="userPages/userPermission/userPermission.css" />
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>User Permissions Management</h1>
        <p>Manage and assign permissions to system users</p>
      </div>

      <div class="card">
        <div class="user-selection">
          <div class="form-group">
            <label for="userId">Select User by ID:</label>
            <input
              type="text"
              id="userId"
              class="form-control"
              placeholder="Enter User ID (e.g., 507f1f77bcf86cd799439011)"
            />
          </div>
          <button class="btn btn-primary" onclick="loadUser()">
            Load User
          </button>
        </div>

        <div class="form-group">
          <label for="userSearch">Or Search Users:</label>
          <input
            type="text"
            id="userSearch"
            class="form-control"
            placeholder="Search by username or real name..."
            oninput="searchUsers()"
          />
          <div id="userSearchResults" class="hidden"></div>
        </div>
      </div>

      <div id="userInfo" class="card hidden">
        <div class="user-info">
          <h3>User Information</h3>
          <div class="info-grid">
            <div class="info-item">
              <span class="info-label">Username</span>
              <span class="info-value" id="infoUsername">-</span>
            </div>
            <div class="info-item">
              <span class="info-label">Real Name</span>
              <span class="info-value" id="infoRealName">-</span>
            </div>
            <div class="info-item">
              <span class="info-label">User ID</span>
              <span class="info-value" id="infoUserId">-</span>
            </div>
            <div class="info-item">
              <span class="info-label">Current Permissions</span>
              <span class="info-value" id="infoPermissionCount">0</span>
            </div>
          </div>
        </div>

        <div id="message" class="message hidden"></div>

        <div class="permissions-section">
          <h3 class="section-title">Available Permissions</h3>

          <div class="permissions-grid" id="commonPermissions">
            <!-- Common permissions will be loaded here -->
          </div>

          <div class="custom-permission">
            <input
              type="text"
              id="customPermissionInput"
              class="form-control"
              placeholder="Enter custom permission name..."
            />
            <button class="btn btn-success" onclick="addCustomPermission()">
              Add Custom Permission
            </button>
          </div>
        </div>

        <div class="permissions-section">
          <h3 class="section-title">Selected Permissions</h3>
          <div class="current-permissions" id="selectedPermissions">
            <!-- Selected permissions will be shown here -->
          </div>
        </div>

        <div class="actions">
          <button class="btn btn-primary" onclick="updatePermissions()">
            Update Permissions
          </button>
          <button class="btn btn-danger" onclick="resetForm()">Reset</button>
        </div>
      </div>

      <div id="loading" class="loading hidden">Loading...</div>
    </div>

    <script src="/components/header/headerLoader.js?v=1.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"></script>
    <script src="userPages/userPermission/userPermission.js"></script>
  </body>
</html>
